<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v3 docs-doc-page docs-doc-id-upgrade" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Upgrade Guide - v3 | Textwire</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://textwire.github.io/docs/v3/upgrade"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v3"><meta data-rh="true" name="docsearch:version" content="v3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v3"><meta data-rh="true" property="og:title" content="Upgrade Guide - v3 | Textwire"><meta data-rh="true" name="description" content="Learn how to upgrade your Textwire code from v2 to v3"><meta data-rh="true" property="og:description" content="Learn how to upgrade your Textwire code from v2 to v3"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://textwire.github.io/docs/v3/upgrade"><link data-rh="true" rel="alternate" href="https://textwire.github.io/docs/v3/upgrade" hreflang="en"><link data-rh="true" rel="alternate" href="https://textwire.github.io/docs/v3/upgrade" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Upgrade Guide","item":"https://textwire.github.io/docs/v3/upgrade"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Textwire RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Textwire Atom Feed"><link rel="stylesheet" href="/assets/css/styles.24090d52.css">
<script src="/assets/js/runtime~main.64525bdd.js" defer="defer"></script>
<script src="/assets/js/main.28891238.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Textwire Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Textwire Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Textwire</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/v3/introduction">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">♥️ Support</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v3/upgrade">v3</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v3/upgrade">v3</a></li><li><a class="dropdown__link" href="/docs/v2/upgrade">v2</a></li><li><a class="dropdown__link" href="/docs/v1/get-started/">v1</a></li></ul></div><a href="https://github.com/textwire/textwire.nvim" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Neovim<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://marketplace.visualstudio.com/items?itemName=SerhiiCho.textwire" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">VSCode<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/textwire/textwire" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/introduction"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/get-started"><span title="Get Started" class="linkLabel_WmDU">Get Started</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/v3/guides/"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/v3/language-elements/"><span title="Language Elements" class="categoryLinkLabel_W154">Language Elements</span></a><button aria-label="Expand sidebar category &#x27;Language Elements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/v3/functions/"><span title="Functions" class="categoryLinkLabel_W154">Functions</span></a><button aria-label="Expand sidebar category &#x27;Functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/v3/upgrade"><span title="Upgrade Guide" class="linkLabel_WmDU">Upgrade Guide</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Upgrade Guide</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrade Guide</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="upgrading-from-v2-to-v3">Upgrading from v2 to v3<a href="#upgrading-from-v2-to-v3" class="hash-link" aria-label="Direct link to Upgrading from v2 to v3" title="Direct link to Upgrading from v2 to v3" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-summary">Quick Summary<a href="#quick-summary" class="hash-link" aria-label="Direct link to Quick Summary" title="Direct link to Quick Summary" translate="no">​</a></h3>
<p>For experienced developers, here&#x27;s the high-level overview:</p>
<ul>
<li class="">Change import paths from <code>v2</code> to <code>v3</code></li>
<li class="">Update Go version requirement</li>
<li class="">Rename any <code>global</code> variables</li>
<li class="">Update custom function return types to <code>any</code></li>
<li class="">Update file extensions from <code>.tw.html</code> to <code>.tw</code> (optional)</li>
<li class="">Function call precedence has changed for prefix expressions</li>
<li class="">Pass variables to components manually</li>
</ul>
<p>Going from version 2 to version 3 is a simple process but it does involve some breaking changes.</p>
<p>The reason we are doing so many breaking changes in one release is because it&#x27;s better to do them right now when we don&#x27;t have lots of people using Textwire. This transition would be much harder with tens of thousands of users than hundreds of users. Thank you for choosing Textwire, we&#x27;ll do the best job possible to give you the least painful transition experience with detailed guide.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="table-of-contents">Table of Contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents" translate="no">​</a></h2>
<ol>
<li class=""><a href="#1-new-import-path" class="">New Import Path</a></li>
<li class=""><a href="#2-updating-the-dependencies" class="">Updating the Dependencies</a></li>
<li class=""><a href="#3-minimal-go-version-is-125" class="">Minimal Go Version is 1.25</a></li>
<li class=""><a href="#4-global-variable-conflict" class="">Global Variable Conflict</a></li>
<li class=""><a href="#5-return-type-for-custom-functions" class="">Return Type for Custom Functions</a></li>
<li class=""><a href="#6-precedence-change" class="">Precedence Change</a></li>
<li class=""><a href="#7-changed-default-file-extension" class="">Changed Default file Extension</a></li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps" translate="no">​</a></h2>
<p>Follow the steps below to upgrade your Textwire code to v3.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-new-import-path">1. New Import Path<a href="#1-new-import-path" class="hash-link" aria-label="Direct link to 1. New Import Path" title="Direct link to 1. New Import Path" translate="no">​</a></h3>
<p>Change all the imports in your code from <code>github.com/textwire/textwire/v2</code> to <code>github.com/textwire/textwire/v3</code></p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> import &quot;github.com/textwire/textwire/v2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> import &quot;github.com/textwire/textwire/v3&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-updating-the-dependencies">2. Updating the Dependencies<a href="#2-updating-the-dependencies" class="hash-link" aria-label="Direct link to 2. Updating the Dependencies" title="Direct link to 2. Updating the Dependencies" translate="no">​</a></h3>
<p>Run the command <code>go mod tidy</code> to update the dependencies in your <code>go.mod</code> file</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Update Go module dependencies</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go mod tidy</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-minimal-go-version-is-125">3. Minimal Go Version is 1.25<a href="#3-minimal-go-version-is-125" class="hash-link" aria-label="Direct link to 3. Minimal Go Version is 1.25" title="Direct link to 3. Minimal Go Version is 1.25" translate="no">​</a></h3>
<p>Make sure your Go version is <code>1.25</code> or higher.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Breaking Change</div><div class="admonitionContent_BuS1"><p>Applications using Go versions below 1.25 will not work with Textwire v3.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-global-variable-conflict">4. Global Variable Conflict<a href="#4-global-variable-conflict" class="hash-link" aria-label="Direct link to 4. Global Variable Conflict" title="Direct link to 4. Global Variable Conflict" translate="no">​</a></h3>
<p>If you have any defined variables called <code>global</code>, rename it to something else because this variable is now reserved. You&#x27;ll get an error if you are trying to use it.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Critical</div><div class="admonitionContent_BuS1"><p>Using <code>global</code> as a variable name will cause compilation errors in v3. This variable name is now reserved for internal use.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Recursively search files that contain the word global</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;global&quot;</span><span class="token plain"> ./templates</span><br></span></code></pre></div></div>
<p>Replace <code>./templates</code> with the path to your Textwire files. It will show you all the files that you need to modify. If you found any, prefix them with underscore like <code>_global</code> and search for <code>&quot;global&quot;</code> in your Go files, in the parts that pass that variable through to Textwire.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Search for global variable references in Go code</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&quot;global&quot;&#x27;</span><span class="token plain"> ./internal</span><br></span></code></pre></div></div>
<p>Replace <code>./internal</code> with the path to your Go code. If you found any values that you pass to Textwire, replace <code>&quot;global&quot;</code> with <code>&quot;_global&quot;</code>.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-return-type-for-custom-functions">5. Return Type for Custom Functions<a href="#5-return-type-for-custom-functions" class="hash-link" aria-label="Direct link to 5. Return Type for Custom Functions" title="Direct link to 5. Return Type for Custom Functions" translate="no">​</a></h3>
<p>In Textwire v2, custom functions would return the receiver type. For example, if you define a custom function for strings, it would return string. In Textwire v3, custom functions for all types return type <code>any</code>, which is an alias to <code>interface{}</code>. Check if you have custom functions defined in your Go code.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Breaking Change</div><div class="admonitionContent_BuS1"><p>All custom functions must now return <code>any</code> instead of their specific type. This affects <code>RegisterStrFunc</code>, <code>RegisterIntFunc</code>, <code>RegisterBoolFunc</code>, <code>RegisterFloatFunc</code>, and <code>RegisterArrFunc</code>.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Search for custom function registrations</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Register(Str|Int|Bool|Float|Arr)Func\(&quot;</span><span class="token plain"> ./internal</span><br></span></code></pre></div></div>
<p>Replace <code>./internal</code> with the path to your Go code. If you found any, just change the return type to any.</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Update custom function return type</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> err = textwire.RegisterStrFunc(&quot;_isCool&quot;, func(s string, args ...any) string {</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> err = textwire.RegisterStrFunc(&quot;_isCool&quot;, func(s string, args ...any) any {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   return s == &quot;John Wick&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain">})</span><br></span></code></pre></div></div>
<p>The behavior will not change, because your function will still return the same type as it was.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-precedence-change">6. Precedence Change<a href="#6-precedence-change" class="hash-link" aria-label="Direct link to 6. Precedence Change" title="Direct link to 6. Precedence Change" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-the-problem">Understanding the Problem<a href="#understanding-the-problem" class="hash-link" aria-label="Direct link to Understanding the Problem" title="Direct link to Understanding the Problem" translate="no">​</a></h4>
<p>Textwire v2 has a wrong <a href="https://en.wikipedia.org/wiki/Order_of_operations" target="_blank" rel="noopener noreferrer" class="">precedence</a> for function call operations with prefix expressions. For example, operation like <code>{{ !&quot;aaa&quot;.contains(&quot;a&quot;) }}</code> would evaluate <code>!&quot;aaa&quot;</code> first and cause an error because you cannot use <code>!</code> operator on string.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-precedence-behavior">New Precedence Behavior<a href="#new-precedence-behavior" class="hash-link" aria-label="Direct link to New Precedence Behavior" title="Direct link to New Precedence Behavior" translate="no">​</a></h4>
<p>Textwire v3 puts higher precedence on function call and in code like this <code>{{ !&quot;aaa&quot;.contains(&quot;a&quot;) }}</code> it would first evaluate <code>&quot;aaa&quot;.contains(&quot;a&quot;)</code> and then apply <code>!</code> operator. Check if you use the functions with prefix expressions like <code>!</code> and <code>-</code> and make sure they returns the result you expect.</p>
<p>Here is the command that will help you to find all functions that might be affected by this change. Only functions that return boolean, integer or float could be affected by this change. See if any of them have prefix.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Search for functions affected by precedence change</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\.(contains|len|rand|abs|float|ceil|floor|int|binary|then)\(&quot;</span><span class="token plain"> ./internal</span><br></span></code></pre></div></div>
<p>Replace <code>./internal</code> with the path to your Go code.</p>
<p>If you found something like <code>{{ -numb.floor() }}</code>, you can fix it in two ways:</p>
<ol>
<li class=""><strong>Keep the old behavior.</strong> To keep the old behavior just add parenthesis like this <code>{{ (-numb).floor() }}</code>.</li>
<li class=""><strong>To get the correct behavior.</strong> To get the correct result, you don&#x27;t need to change anything, just keep <code>{{ -numb.floor() }}</code>. It will evaluate <code>numb.floor()</code> first and then prepend <code>-</code> sign to the result.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-changed-default-file-extension">7. Changed Default file Extension<a href="#7-changed-default-file-extension" class="hash-link" aria-label="Direct link to 7. Changed Default file Extension" title="Direct link to 7. Changed Default file Extension" translate="no">​</a></h3>
<p>Textwire v2 is using <code>.tw.html</code> file extension by default, in v3 this file default file extension was changed to <code>.tw</code>. If you use <code>.tw.html</code> for your Textwire files, you can resolve this in 2 ways:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-easy-solution">1. Easy Solution<a href="#1-easy-solution" class="hash-link" aria-label="Direct link to 1. Easy Solution" title="Direct link to 1. Easy Solution" translate="no">​</a></h4>
<p>The easy solution would be to find your <code>textwire.NewTemplate()</code> or <code>textwire.Configure()</code> (depending on how you set configurations), and add <code>TemplateExt: &quot;.tw.html&quot;</code> configuration like this:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Configure template extension for v3 compatibility</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tpl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> textwire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TemplateExt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.tw.html&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-a-long-term-solution">2. A Long Term Solution<a href="#2-a-long-term-solution" class="hash-link" aria-label="Direct link to 2. A Long Term Solution" title="Direct link to 2. A Long Term Solution" translate="no">​</a></h4>
<p>Rename Textwire file extensions from <code>.tw.html</code> to <code>.tw</code> and make sure you don&#x27;t have <code>TemplateExt</code> configuration setup. In Textwire v3 <code>TemplateExt</code> is set to <code>.tw</code> by default.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You can set any extension for Textwire that you want, refer to <a class="" href="/docs/v3/guides/configurations">configurations</a> page for more details. But we recommend using <code>.tw</code>.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="8-components-scope-fix">8. Components Scope Fix<a href="#8-components-scope-fix" class="hash-link" aria-label="Direct link to 8. Components Scope Fix" title="Direct link to 8. Components Scope Fix" translate="no">​</a></h3>
<p>Components in <strong>Textwire v2</strong> would pass variables to their children automatially without manual passing. It was a bug. In <strong>Textwire v3</strong> each component has its scope. You need to pass data manually if you were using this:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{{ name = &quot;Anna&quot; }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> @component(&#x27;user&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> @component(&#x27;user&#x27;, { name })</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="9-variable-leak-fix">9. Variable Leak Fix<a href="#9-variable-leak-fix" class="hash-link" aria-label="Direct link to 9. Variable Leak Fix" title="Direct link to 9. Variable Leak Fix" translate="no">​</a></h3>
<p>Fixed variable leak from template to layout non-explicitly. In Textwire v2, if you had a variable in your template, it would be accessible in your layout without passing it explicitly. In Textwire v3, this is not available anymore.</p>
<p>If you were utilizing this behavior, you can fix it by using <a class="" href="/docs/v3/guides/configurations#global-data">Global Data</a>. Use it to pass variables into all of your Textwire files.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v3/faq"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#upgrading-from-v2-to-v3" class="table-of-contents__link toc-highlight">Upgrading from v2 to v3</a><ul><li><a href="#quick-summary" class="table-of-contents__link toc-highlight">Quick Summary</a></li></ul></li><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps</a><ul><li><a href="#1-new-import-path" class="table-of-contents__link toc-highlight">1. New Import Path</a></li><li><a href="#2-updating-the-dependencies" class="table-of-contents__link toc-highlight">2. Updating the Dependencies</a></li><li><a href="#3-minimal-go-version-is-125" class="table-of-contents__link toc-highlight">3. Minimal Go Version is 1.25</a></li><li><a href="#4-global-variable-conflict" class="table-of-contents__link toc-highlight">4. Global Variable Conflict</a></li><li><a href="#5-return-type-for-custom-functions" class="table-of-contents__link toc-highlight">5. Return Type for Custom Functions</a></li><li><a href="#6-precedence-change" class="table-of-contents__link toc-highlight">6. Precedence Change</a></li><li><a href="#7-changed-default-file-extension" class="table-of-contents__link toc-highlight">7. Changed Default file Extension</a></li><li><a href="#8-components-scope-fix" class="table-of-contents__link toc-highlight">8. Components Scope Fix</a></li><li><a href="#9-variable-leak-fix" class="table-of-contents__link toc-highlight">9. Variable Leak Fix</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>