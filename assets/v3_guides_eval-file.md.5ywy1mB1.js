import{_ as s,o as a,c as e,ah as t}from"./chunks/framework.BKCvwjwz.js";const c=JSON.parse('{"title":"Evaluating Files - v3","description":"Learn how to evaluate files containing Textwire code in your Go applications using the EvaluateFile function","frontmatter":{"title":"Evaluating Files - v3","description":"Learn how to evaluate files containing Textwire code in your Go applications using the EvaluateFile function"},"headers":[],"relativePath":"v3/guides/eval-file.md","filePath":"versions/v3/guides/eval-file.md","lastUpdated":1770800524000}'),n={name:"v3/guides/eval-file.md"};function l(r,i,p,h,o,d){return a(),e("div",null,[...i[0]||(i[0]=[t(`<h1 id="evaluating-files" tabindex="-1">Evaluating Files <a class="header-anchor" href="#evaluating-files" aria-label="Permalink to &quot;Evaluating Files&quot;">​</a></h1><p>Use the <code>EvaluateFile</code> function to evaluate a file containing Textwire code. The function accepts a file path and a map of variables to inject into the template. This approach is ideal for processing individual template files without setting up a full template engine.</p><p>Here is an example:</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">path </span><span style="--shiki-light:#D73A49;--shiki-dark:#94E2D5;">:=</span><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;"> &quot;templates/email-template.tw&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#94E2D5;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> textwire</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">EvaluateFile</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#CBA6F7;"> map</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#CBA6F7;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">]</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#F9E2AF;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;"> &quot;Anna&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;">    &quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#FAB387;">  25</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;">    &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;"> &quot;Developer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#CBA6F7;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#94E2D5;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F38BA8;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">Fatal</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">// result now contains the fully evaluated template content</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="good-to-know" tabindex="-1">Good to Know <a class="header-anchor" href="#good-to-know" aria-label="Permalink to &quot;Good to Know&quot;">​</a></h2><ul><li><strong>Confiturations</strong> that you set with <code>Configure</code> have no effect on <code>EvaluateFile</code> and <code>EvaluateString</code>.</li><li>You cannot use template directives like <code>@use</code>, <code>@insert</code>, <code>@reserve</code> or <code>@component</code> inside because they are specific to templates.</li></ul><h2 id="return-values" tabindex="-1">Return Values <a class="header-anchor" href="#return-values" aria-label="Permalink to &quot;Return Values&quot;">​</a></h2><p>The <code>EvaluateFile</code> function returns two values:</p><ol><li><code>string</code> - The evaluated template with all variables substituted and Textwire code processed</li><li><code>error</code> - Any error that occurred during file reading, compilation, or evaluation</li></ol><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error Handling&quot;">​</a></h2><p>The function can return errors for various reasons:</p><ul><li><strong>File not found</strong> - The specified path does not exist</li><li><strong>Permission denied</strong> - Insufficient file system permissions</li><li><strong>Syntax errors</strong> - Invalid Textwire syntax in the template file</li><li><strong>Undefined variables</strong> - Variables referenced but not provided in the data map</li><li><strong>Type mismatches</strong> - Incompatible data types when evaluating expressions</li></ul><p>Always check the error value before using the result string:</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#94E2D5;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> textwire</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">EvaluateFile</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#A6E3A1;">&quot;template.tw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> data</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#CBA6F7;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#CDD6F4;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#94E2D5;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F38BA8;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">    // handle error here</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#9399B2;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="file-path-resolution" tabindex="-1">File Path Resolution <a class="header-anchor" href="#file-path-resolution" aria-label="Permalink to &quot;File Path Resolution&quot;">​</a></h2><p>The <code>EvaluateFile</code> function resolves file paths as follows:</p><ul><li><strong>Relative paths</strong> are resolved from the main entry point directory</li><li><strong>Absolute paths</strong> are used as specified</li><li><strong>Template directory configuration</strong> does not affect <code>EvaluateFile</code> - it uses exact paths</li><li><strong>File extensions</strong> are not automatically added - specify the full path including <code>.tw</code></li></ul><h2 id="when-to-use-evaluatefile" tabindex="-1">When to Use EvaluateFile <a class="header-anchor" href="#when-to-use-evaluatefile" aria-label="Permalink to &quot;When to Use EvaluateFile&quot;">​</a></h2><p>Use <code>EvaluateFile</code> when:</p><ul><li>Processing individual template files without full template engine setup</li><li>Evaluating user-uploaded template files</li><li>Creating one-off template evaluations</li><li>Testing template files during development</li><li>Building simple template-based tools</li></ul><p>For complex applications with multiple templates, consider using the template engine with <code>textwire.NewTemplate</code> for better performance and caching.</p><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ol><li><strong>Validate file paths</strong> before evaluation to prevent path traversal attacks</li><li><strong>Handle errors gracefully</strong> and provide meaningful error messages to users</li><li><strong>Use descriptive variable names</strong> in data maps for better code readability</li><li><strong>Consider file permissions</strong> when deploying applications in production</li><li><strong>Cache frequently evaluated files</strong> for better performance in production applications</li></ol>`,23)])])}const u=s(n,[["render",l]]);export{c as __pageData,u as default};
