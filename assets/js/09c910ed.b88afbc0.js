"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5410],{3309:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var i=t(6319),r=t(4848),s=t(8453);const o={title:"v3 Release Notes",description:"Get to know details about the Textwire v3 release by reading the complete release notes",authors:["serhiicho"],tags:["release"]},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Table of Contents",id:"table-of-contents",level:3},{value:"New Features",id:"new-features",level:2},{value:"1. Function <code>defined</code>",id:"1-function-defined",level:3},{value:"2. Global Data",id:"2-global-data",level:3},{value:"3. Custom Functions for Object Type",id:"3-custom-functions-for-object-type",level:3},{value:"4. Embed Templates into Binary",id:"4-embed-templates-into-binary",level:3},{value:"Improvements",id:"improvements",level:2},{value:"1. Error Handling",id:"1-error-handling",level:3},{value:"2. Memory Performance",id:"2-memory-performance",level:3},{value:"Bug Fixes",id:"bug-fixes",level:2},{value:"1. Using Component Statement inside Layout",id:"1-using-component-statement-inside-layout",level:3},{value:"2. Incorrect File Path",id:"2-incorrect-file-path",level:3},{value:"3. Function <code>contains()</code>",id:"3-function-contains",level:3},{value:"4. Replace Panic with Error",id:"4-replace-panic-with-error",level:3},{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"1. Custom Functions Return Type",id:"1-custom-functions-return-type",level:3},{value:"2. Reserved Variable Name",id:"2-reserved-variable-name",level:3},{value:"3. Precedence Fix",id:"3-precedence-fix",level:3},{value:"4. Default Extension Change",id:"4-default-extension-change",level:3},{value:"5. Minimal Go Version",id:"5-minimal-go-version",level:3},{value:"6. Components Scope Fix",id:"6-components-scope-fix",level:3},{value:"7. Variable Leak Fix",id:"7-variable-leak-fix",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Textwire v3 is one of the most important releases, introducing several significant features and improvements. This release includes the introduction of the ",(0,r.jsx)(n.code,{children:"global"})," variable object, a new ",(0,r.jsx)(n.a,{href:"/docs/v3/functions/global#defined",children:"defined()"})," function (",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/56",children:"#56"}),"), the ability to register custom functions for the OBJECT type, and improvements to error handling, performance (",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/61",children:"#61"})," ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/60",children:"#60"})," ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/59",children:"#59"}),"), and usability ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/35",children:"#35"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["If you are transitioning from Textwire v2, you can follow ",(0,r.jsx)(n.a,{href:"/docs/v3/upgrade",children:"this guide"})," for all the instructions. v3 contains several breaking changes, so make sure you don't miss any parts of the guide."]}),"\n",(0,r.jsx)(n.h3,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#new-features",children:"New Features"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#improvements",children:"Improvements"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#bug-fixes",children:"Bug Fixes"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#breaking-changes",children:"Breaking Changes"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"new-features",children:"New Features"}),"\n",(0,r.jsx)(n.p,{children:"Textwire v3 brings several new features to the language. Let's explore these features, starting with a new concept in Textwire - global functions."}),"\n",(0,r.jsxs)(n.h3,{id:"1-function-defined",children:["1. Function ",(0,r.jsx)(n.code,{children:"defined"})]}),"\n",(0,r.jsxs)(n.p,{children:["Textwire v3 introduces the global function ",(0,r.jsx)(n.a,{href:"/docs/v3/functions/global#defined",children:"defined()"})," that returns a boolean value. This function should be used only with variables and allows you to check if a variable is defined to prevent Textwire from creating an error."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-textwire",metastring:'title="components/header.tw"',children:'<header class="header">\n    <h2>{{ page.title }}</h2>\n    <p>{{ page.desc }}</p>\n\n    @if(defined(user))\n        <small>The user is {{ user.name }}</small>\n    @end\n</header>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Here are the commits ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/0a19b5b5d6363a2ee9c9827df25026ffab5c2e1e",children:"0a19b"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/f1d3fdc0736dd0892aeacfa28b5156cca0c78ac3",children:"f1d3f"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/264e7ffc37a1d3bf6344fb99530be2f2b89c2081",children:"264e7"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"2-global-data",children:"2. Global Data"}),"\n",(0,r.jsx)(n.p,{children:"In v3 you can now pass values from your Go code to any Textwire template using the global object. Here is an example of passing some values:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'import (\n    "os"\n    "github.com/textwire/textwire/v3"\n    "github.com/textwire/textwire/v3/config"\n)\n\ntpl, err = textwire.NewTemplate(&config.Config{\n    DebugMode:     true,\n    GlobalData: map[string]any{\n        "env":  os.Getenv("APP_ENV"),\n    },\n})\n'})}),"\n",(0,r.jsx)(n.p,{children:"In your templates, you can access global object like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-textwire",metastring:'title="home.tw"',children:'@if (global.env == "development")\n    <p>You are currently in development mode</p>\n@end\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Read more about ",(0,r.jsx)(n.a,{href:"/docs/v3/guides/configurations#global-data",children:"Global Data"})," in our docs, or look at the ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/f156f3fd2175f925652d462d75dc843a396de702",children:"commit"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"3-custom-functions-for-object-type",children:"3. Custom Functions for Object Type"}),"\n",(0,r.jsxs)(n.p,{children:["In Textwire v2 you could define ",(0,r.jsx)(n.a,{href:"/docs/v3/guides/custom-functions",children:"custom functions"})," for all types except objects; in v3 you can now do that. This was added with ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/a225ccacaf0fc9ca62365ebfe7e715de39b067af",children:"this commit"}),". Here is a simple example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'err := textwire.RegisterObjFunc("_addProp", func(obj map[string]any, args ...any) any {\n    key := args[0].(string) // first arg\n    value := args[1] // second arg\n    obj[key] = value\n    return obj\n})\n'})}),"\n",(0,r.jsx)(n.p,{children:"You can now use it in Textwire:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'input := `{{ obj = {name: "Anna"}; obj = obj._addProp("age", 25); obj.age }}`\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "25"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-embed-templates-into-binary",children:"4. Embed Templates into Binary"}),"\n",(0,r.jsxs)(n.p,{children:["Now, in Textwire v3 you can use Go's embedded package to embed Textwire template files into a final, compiled binary. You can read about how to use this functionality in ",(0,r.jsx)(n.a,{href:"/docs/v3/guides/template-embedding",children:"our docs"}),". But it looks something like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="main.go" showLineNumbers',children:'package main\n\nimport (\n\t"embed"\n\n\t"github.com/textwire/textwire/v3"\n\t"github.com/textwire/textwire/v3/config"\n)\n\n// highlight-start\n//go:embed templates/*\nvar templateFS embed.FS\n// highlight-end\n\nfunc main() {\n    tpl, err := textwire.NewTemplate(&config.Config{\n        // highlight-next-line\n        TemplateFS:    templateFS,\n    })\n\n    // other logic here ...\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"improvements",children:"Improvements"}),"\n",(0,r.jsx)(n.h3,{id:"1-error-handling",children:"1. Error Handling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Improve error handling with ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/d9442c5d567d788652c03fb8efa6125c93ee5843",children:"this commit"})," when trying to use ",(0,r.jsx)(n.code,{children:"@use"}),", ",(0,r.jsx)(n.code,{children:"@insert"}),", ",(0,r.jsx)(n.code,{children:"@reserve"})," or ",(0,r.jsx)(n.code,{children:"@component"})," directives in simple ",(0,r.jsx)(n.code,{children:"EvaluateString"})," or ",(0,r.jsx)(n.code,{children:"EvaluateFile"})," function calls. These directives are only allowed inside template files with ",(0,r.jsx)(n.code,{children:"textwire.NewTemplate"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Now, you'll get a clear error message like ",(0,r.jsx)(n.code,{children:"@use, @insert, @reserve, @component only allowed in templates"})," if you try to use them. Previously, the error wasn't clear."]}),"\n",(0,r.jsxs)(n.li,{children:["Improved all error messages in ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/commit/e6b0935af2d7de0469733e12028fc349564584c6",children:"this commit"})," to make them clearer and more straightforward."]}),"\n",(0,r.jsxs)(n.li,{children:["You'll get a proper error instead of panic when you try to use ",(0,r.jsx)(n.code,{children:"@each(item in false)"})," directive on non-array type."]}),"\n",(0,r.jsxs)(n.li,{children:["You'll get a clear error when using 2 or more ",(0,r.jsx)(n.code,{children:"@use"})," statements in the same template."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["There are much more improvements to error handling in this release, so make sure to ",(0,r.jsx)(n.a,{href:"/docs/v3/upgrade",children:"upgrade"})," to version 3."]}),"\n",(0,r.jsx)(n.h3,{id:"2-memory-performance",children:"2. Memory Performance"}),"\n",(0,r.jsx)(n.p,{children:"Improve memory and performance with optimized data structures and reduced memory allocations. Here are the optimizations that you can expect in Textwire v3:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Improved target"}),(0,r.jsx)(n.th,{children:"Speed"}),(0,r.jsx)(n.th,{children:"Memory usage"}),(0,r.jsx)(n.th,{children:"Allocations"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Function ",(0,r.jsx)(n.a,{href:"/docs/v3/functions/arr#join",children:"arr.join()"})]}),(0,r.jsxs)(n.td,{children:["\u26a1 ",(0,r.jsx)(n.strong,{children:"18.5\xd7 faster"})]}),(0,r.jsxs)(n.td,{children:["\ud83d\udcbe ",(0,r.jsx)(n.strong,{children:"97.8% less"})]}),(0,r.jsxs)(n.td,{children:["\ud83d\udcc9 ",(0,r.jsx)(n.strong,{children:"33% fewer"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Tokenizing (lexing) directives"}),(0,r.jsxs)(n.td,{children:["\u26a1 ",(0,r.jsx)(n.strong,{children:"1.24\xd7 faster"})]}),(0,r.jsxs)(n.td,{children:["\ud83d\udcbe ",(0,r.jsx)(n.strong,{children:"46.9% less"})]}),(0,r.jsxs)(n.td,{children:["\ud83d\udcc9 ",(0,r.jsx)(n.strong,{children:"84.9% fewer"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Parsed AST evaluation"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"No change"})}),(0,r.jsxs)(n.td,{children:["\ud83d\udcbe ",(0,r.jsx)(n.strong,{children:"9.3% less"})]}),(0,r.jsxs)(n.td,{children:["\ud83d\udcc9 ",(0,r.jsx)(n.strong,{children:"2.5% fewer"})]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Here is a GitHub ",(0,r.jsx)(n.a,{href:"https://github.com/textwire/textwire/issues/59",children:"issue"})," for ",(0,r.jsx)(n.code,{children:"array.join()"})," if you are interested."]}),"\n",(0,r.jsx)(n.h2,{id:"bug-fixes",children:"Bug Fixes"}),"\n",(0,r.jsx)(n.p,{children:"Like any software, Textwire has its share of bugs. We found and fixed several bugs in this release. You can find the list of fixed bugs below."}),"\n",(0,r.jsx)(n.h3,{id:"1-using-component-statement-inside-layout",children:"1. Using Component Statement inside Layout"}),"\n",(0,r.jsxs)(n.p,{children:["Fixed bug where you couldn't use ",(0,r.jsx)(n.code,{children:"@component"})," directive inside of a layout file like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-textwire",children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>@reserve(\'title\')</title>\n    <meta name="description" content="@reserve(\'description\')">\n</head>\n<body>\n@component(\'~navbar\') {{-- using components/navbar here --}}\n<main class="container mx-auto max-w-200">\n@reserve(\'content\')\n</main>\n</body>\n</html>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["You also couldn't use ",(0,r.jsx)(n.code,{children:"@component"})," inside of other components. Now, it all has been fixed."]}),"\n",(0,r.jsx)(n.h3,{id:"2-incorrect-file-path",children:"2. Incorrect File Path"}),"\n",(0,r.jsxs)(n.p,{children:["Fixed incorrect file path in error messages when an error occurs inside the ",(0,r.jsx)(n.code,{children:"@insert"})," directive. It used to point to the wrong file."]}),"\n",(0,r.jsxs)(n.h3,{id:"3-function-contains",children:["3. Function ",(0,r.jsx)(n.code,{children:"contains()"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Fixed ",(0,r.jsx)(n.code,{children:"contains"})," function for strings, ",(0,r.jsx)(n.code,{children:'{{ !"aaa".contains("a") }}'})," now returns correct result."]}),"\n",(0,r.jsxs)(n.li,{children:["Fixed ",(0,r.jsx)(n.code,{children:"contains"})," function for arrays, ",(0,r.jsx)(n.code,{children:"{{ ![{}, 21].contains({age: 21}) }}"})," now returns correct result.\nThey both used to work incorrect because of incorrect precidence, which was fixed."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-replace-panic-with-error",children:"4. Replace Panic with Error"}),"\n",(0,r.jsxs)(n.p,{children:["Now you will get a proper error when trying to access propery on non object type like ",(0,r.jsx)(n.code,{children:'{{ "str".nice }}'}),". Before, in Textwire v2 you would get a panic with weird error message and long stacktrace."]}),"\n",(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,r.jsx)(n.p,{children:"Textwire v3 introduces several breaking changes. We're implementing these changes now rather than later, as it's better to make significant updates when the user base is smaller."}),"\n",(0,r.jsxs)(n.p,{children:["This transition would be much harder with tens of thousands of users than with hundreds. Thank you for choosing Textwire - we'll provide the least painful transition experience with our ",(0,r.jsx)(n.a,{href:"/docs/v3/upgrade",children:"detailed upgrade guide"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:["I'll discuss each breaking change briefly because they are already explained in the ",(0,r.jsx)(n.a,{href:"/docs/v3/upgrade",children:"Upgrade Guide"}),", so there's no need to repeat that detailed information here."]})}),"\n",(0,r.jsx)(n.h3,{id:"1-custom-functions-return-type",children:"1. Custom Functions Return Type"}),"\n",(0,r.jsxs)(n.p,{children:["When you define a custom function, it now returns the type ",(0,r.jsx)(n.code,{children:"any"}),". If you have any registered custom functions, make sure to change their return type to ",(0,r.jsx)(n.code,{children:"any"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"2-reserved-variable-name",children:"2. Reserved Variable Name"}),"\n",(0,r.jsxs)(n.p,{children:["Variable ",(0,r.jsx)(n.code,{children:"global"})," is now reserved, you cannot use this name for your variables."]}),"\n",(0,r.jsx)(n.h3,{id:"3-precedence-fix",children:"3. Precedence Fix"}),"\n",(0,r.jsxs)(n.p,{children:["Fixed precedence for prefix expressions and function call expressions. In Textwire v3, function calls now have higher precedence over prefix expressions. Instead of ",(0,r.jsx)(n.code,{children:"((!var).func())"}),", we now have ",(0,r.jsx)(n.code,{children:"(!(var.func()))"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"4-default-extension-change",children:"4. Default Extension Change"}),"\n",(0,r.jsxs)(n.p,{children:["Changed the default file extension from ",(0,r.jsx)(n.code,{children:".tw.html"})," to ",(0,r.jsx)(n.code,{children:".tw"}),". If you still want to support ",(0,r.jsx)(n.code,{children:".tw.html"}),", add the field ",(0,r.jsx)(n.code,{children:'TemplateExt: ".tw.html"'})," to your configuration in ",(0,r.jsx)(n.code,{children:"NewTemplate"})," or ",(0,r.jsx)(n.code,{children:"Configure"}),". This will behave the same way as in Textwire v2."]}),"\n",(0,r.jsx)(n.h3,{id:"5-minimal-go-version",children:"5. Minimal Go Version"}),"\n",(0,r.jsxs)(n.p,{children:["In Textwire v3, the minimum supported Go version is now ",(0,r.jsx)(n.code,{children:"1.25.0"}),". In Textwire v2, it was ",(0,r.jsx)(n.code,{children:"1.22.0"}),". Upgrade your project to the latest version to use Textwire v3."]}),"\n",(0,r.jsx)(n.h3,{id:"6-components-scope-fix",children:"6. Components Scope Fix"}),"\n",(0,r.jsxs)(n.p,{children:["Components in ",(0,r.jsx)(n.strong,{children:"Textwire v2"})," would pass variables to their children automatially without manual passing. It was a bug. In ",(0,r.jsx)(n.strong,{children:"Textwire v3"})," each component has its scope. You need to pass data manually:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:"{{ name = \"Anna\" }}\n\n- @component('user')\n+ @component('user', { name })\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7-variable-leak-fix",children:"7. Variable Leak Fix"}),"\n",(0,r.jsx)(n.p,{children:"Fixed variable leak from template to layout non-explicitly. In Textwire v2, if you had a variable in your template, it would be accessible in your layout without passing it explicitly. In Textwire v3, this is not available anymore."}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.a,{href:"/docs/v3/guides/configurations#global-data",children:"Global Data"})," to pass variables into all of your Textwire files."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},6319:e=>{e.exports=JSON.parse('{"permalink":"/blog/2026/02/05/textwire-v3","source":"@site/blog/2026-02-05-textwire-v3/index.md","title":"v3 Release Notes","description":"Get to know details about the Textwire v3 release by reading the complete release notes","date":"2026-02-05T00:00:00.000Z","tags":[{"inline":false,"label":"Version Release Notes","permalink":"/blog/tags/release","description":"The latest version release notes"}],"readingTime":6.82,"hasTruncateMarker":true,"authors":[{"name":"Serhii Cho","title":"Software Engineer","url":"https://serhiicho.com","page":{"permalink":"/blog/authors/serhiicho"},"socials":{"x":"https://x.com/SerhiiCho","github":"https://github.com/SerhiiCho"},"imageURL":"https://github.com/SerhiiCho.png","key":"serhiicho"}],"frontMatter":{"title":"v3 Release Notes","description":"Get to know details about the Textwire v3 release by reading the complete release notes","authors":["serhiicho"],"tags":["release"]},"unlisted":false,"nextItem":{"title":"v2.4.0 Release Notes","permalink":"/blog/2025/01/10/textwire-v2.4.0"}}')},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);