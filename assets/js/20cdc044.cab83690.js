"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2225],{136:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"guides/template-usage","title":"Usage with Templates - v3","description":"Learn how to configure and use Textwire templates in your Go applications, including importing the package, creating template instances, and more","source":"@site/versioned_docs/version-v3/guides/template-usage.md","sourceDirName":"guides","slug":"/guides/template-usage","permalink":"/docs/v3/guides/template-usage","draft":false,"unlisted":false,"tags":[],"version":"v3","sidebarPosition":2,"frontMatter":{"title":"Usage with Templates - v3","sidebar_label":"Usage with Templates","sidebar_position":2,"description":"Learn how to configure and use Textwire templates in your Go applications, including importing the package, creating template instances, and more"},"sidebar":"tutorialSidebar","previous":{"title":"Guides","permalink":"/docs/v3/guides/"},"next":{"title":"Evaluating Strings","permalink":"/docs/v3/guides/eval-string"}}');var r=n(4848),s=n(8453);const a={title:"Usage with Templates - v3",sidebar_label:"Usage with Templates",sidebar_position:2,description:"Learn how to configure and use Textwire templates in your Go applications, including importing the package, creating template instances, and more"},o="Usage with Templates",l={},c=[{value:"Simple Usage",id:"simple-usage",level:2},{value:"Writing Responses to the Client",id:"writing-responses-to-the-client",level:2},{value:"Layouts",id:"layouts",level:2},{value:"Reserving Space in Layouts",id:"reserving-space-in-layouts",level:3},{value:"Inserting Content into Reserved Spaces",id:"inserting-content-into-reserved-spaces",level:3},{value:"Configuration",id:"configuration",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"usage-with-templates",children:"Usage with Templates"})}),"\n",(0,r.jsx)(t.h2,{id:"simple-usage",children:"Simple Usage"}),"\n",(0,r.jsxs)(t.p,{children:["To use Textwire as a template language, import the ",(0,r.jsx)(t.code,{children:"github.com/textwire/textwire/v3"})," package and create a new Template instance. You can either pass ",(0,r.jsx)(t.code,{children:"nil"})," or a ",(0,r.jsx)(t.code,{children:"*textwire.Config"})," to the ",(0,r.jsx)(t.code,{children:"NewTemplate"})," function. The ",(0,r.jsx)(t.code,{children:"*textwire.Config"})," parameter configures Textwire behavior. Read more about ",(0,r.jsx)(t.a,{href:"/docs/v3/guides/configurations",children:"configurations"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",metastring:'title="main.go"',children:'import (\n    "fmt"\n    "net/http"\n\n    "github.com/textwire/textwire/v3"\n    "github.com/textwire/textwire/v3/config"\n)\n\nvar tpl *textwire.Template\n\nfunc main() {\n    var err error\n\n    tpl, err = textwire.NewTemplate(&config.Config{\n        DebugMode:   true,\n    })\n\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    http.HandleFunc("/", homeHandler)\n\n    http.ListenAndServe(":8080", nil)\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["None of the configurations are required, as each configuration has a default value. The ",(0,r.jsx)(t.code,{children:"NewTemplate"})," function returns two values:"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"*textwire.Template"})," - a struct that holds parsed templates and provides methods to evaluate them"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"error"})," - an error that might occur during any stage of template parsing"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["After calling ",(0,r.jsx)(t.code,{children:"NewTemplate"}),", you receive a ",(0,r.jsx)(t.code,{children:"Template"})," instance that can be used to evaluate parsed templates."]}),"\n",(0,r.jsx)(t.h2,{id:"writing-responses-to-the-client",children:"Writing Responses to the Client"}),"\n",(0,r.jsxs)(t.p,{children:["Use the ",(0,r.jsx)(t.code,{children:"Response"})," method on a ",(0,r.jsx)(t.code,{children:"Template"})," instance to write the evaluated template to the HTTP client. The ",(0,r.jsx)(t.code,{children:"Response"})," method accepts an ",(0,r.jsx)(t.code,{children:"http.ResponseWriter"})," object, the template file name, and a map of variables to inject into the template. Here is an example:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",metastring:'title="main.go"',children:'func homeHandler(w http.ResponseWriter, r *http.Request) {\n    err := tpl.Response(w, "views/home", map[string]interface{}{\n        "title":     "Home page",\n        "names":     []string{"John", "Jane", "Jack", "Jill"},\n        "showNames": true,\n    })\n\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n    }\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["If you prefer not to write directly to the response, use the ",(0,r.jsx)(t.code,{children:"String()"})," method to obtain the final string:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'out, failure := tpl.String("views/home", map[string]any{\n    "names":     []string{"John", "Jane", "Jack", "Jill"},\n    "showNames": true,\n    "books":     books,\n})\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Note that ",(0,r.jsx)(t.code,{children:"tpl.String()"})," does not return a standard ",(0,r.jsx)(t.code,{children:"error"}),". Instead, it returns ",(0,r.jsx)(t.code,{children:"*fail.Error"}),", which is Textwire's error wrapper that provides additional context such as line numbers and file paths."]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["If your template files are not showing up after you've created them and you are using live-reloading libraries like ",(0,r.jsx)(t.a,{href:"https://github.com/gravityblast/fresh",children:"Fresh"})," or ",(0,r.jsx)(t.a,{href:"https://github.com/air-verse/air",children:"Air"}),", restart them. Also, don't forget to add ",(0,r.jsx)(t.code,{children:".tw"})," files to trigger live-reloading."]})}),"\n",(0,r.jsx)(t.h2,{id:"layouts",children:"Layouts"}),"\n",(0,r.jsxs)(t.p,{children:["Defining a layout in Textwire is straightforward. Create a layout file anywhere within your ",(0,r.jsx)(t.code,{children:"templates"})," directory. Many developers organize layouts in a ",(0,r.jsx)(t.code,{children:"templates/layouts/"})," directory to manage different layouts such as ",(0,r.jsx)(t.code,{children:"main.tw"}),", ",(0,r.jsx)(t.code,{children:"admin.tw"}),", and ",(0,r.jsx)(t.code,{children:"user.tw"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"reserving-space-in-layouts",children:"Reserving Space in Layouts"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements#reserve-statement",children:"@reserve"})," directive reserves placeholders for dynamic content that can be inserted later. For example, you can reserve a space for the page title and then populate it from other templates such as ",(0,r.jsx)(t.code,{children:"about-me.tw"})," or ",(0,r.jsx)(t.code,{children:"contact-us.tw"}),". Here is an example layout file:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-textwire",metastring:'title="templates/layouts/main.tw"',children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>@reserve("title")</title>\n</head>\n<body>\n    @reserve("content")\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(t.p,{children:"This layout reserves spaces for the page title and content. These placeholders can be populated with data from templates that extend this layout. The next section explains how to insert content into reserved spaces."}),"\n",(0,r.jsx)(t.h3,{id:"inserting-content-into-reserved-spaces",children:"Inserting Content into Reserved Spaces"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements#insert-statement",children:"@insert"}),' directive inserts content into reserved placeholders. It can be used in two ways: with or without a body. In the following example, we insert content for "title" without a body and for "content" with a body.']}),"\n",(0,r.jsxs)(t.p,{children:["Here is an example ",(0,r.jsx)(t.code,{children:"templates/views/home.tw"})," template:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-textwire",metastring:'title="templates/views/home.tw"',children:'@use("layouts/main")\n\n@insert("title", "Home page")\n\n@insert("content")\n    <h1>Hello, World!</h1>\n    <p>This is a home page.</p>\n@end\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"First, we specify which layout to use by providing the layout path"}),"\n",(0,r.jsx)(t.li,{children:'Then we insert the title into the layout with the value "Home page"'}),"\n",(0,r.jsx)(t.li,{children:"Finally, we insert the main content into the layout with the HTML body."}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["You can read more about ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements#use-statement",children:"@use"}),", ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements#insert-statement",children:"@insert"})," and ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements#reserve-statement",children:"@reserve"})," directives on the ",(0,r.jsx)(t.a,{href:"/docs/v3/language-elements/statements",children:"statements"})," page if you need more information about the syntax."]}),"\n",(0,r.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"NewTemplate"})," function accepts a ",(0,r.jsx)(t.code,{children:"*config.Config"})," parameter with several properties to customize template behavior. Common use cases include overriding the default file format or specifying the template directory. Here is an example of configuration:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",metastring:'title="main.go"',children:'import (\n    "fmt"\n    "net/http"\n\n    "github.com/textwire/textwire/v3"\n    // highlight-next-line\n    "github.com/textwire/textwire/v3/config"\n)\n\nvar tpl *textwire.Template\n\nfunc main() {\n    var err error\n\n    // highlight-start\n    tpl, err = textwire.NewTemplate(&config.Config{\n        TemplateDir: "src/templates",\n    })\n    // highlight-end\n\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    http.HandleFunc("/", homeHandler)\n\n    http.ListenAndServe(":8080", nil)\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["For detailed information about available configuration options, visit the ",(0,r.jsx)(t.a,{href:"/docs/v3/guides/configurations",children:"configurations"})," page."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(6540);const r={},s=i.createContext(r);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);