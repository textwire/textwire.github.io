"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7640],{1954:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/error-handling","title":"Error Handling - v2","description":"Learn how to handle errors in Textwire, enabling you to identify and resolve issues in your project","source":"@site/versioned_docs/version-v2/guides/error-handling.md","sourceDirName":"guides","slug":"/guides/error-handling","permalink":"/docs/v2/guides/error-handling","draft":false,"unlisted":false,"tags":[],"version":"v2","sidebarPosition":6,"frontMatter":{"title":"Error Handling - v2","sidebar_label":"Error Handling","sidebar_position":6,"description":"Learn how to handle errors in Textwire, enabling you to identify and resolve issues in your project"},"sidebar":"tutorialSidebar","previous":{"title":"Custom Functions","permalink":"/docs/v2/guides/custom-functions"},"next":{"title":"Configurations","permalink":"/docs/v2/guides/configurations"}}');var o=r(4848),t=r(8453);const s={title:"Error Handling - v2",sidebar_label:"Error Handling",sidebar_position:6,description:"Learn how to handle errors in Textwire, enabling you to identify and resolve issues in your project"},a="Error Handling",l={},d=[{value:"When Do Errors Occur?",id:"when-do-errors-occur",level:2},{value:"Common Error Cases",id:"common-error-cases",level:3},{value:"Handling errors in Textwire",id:"handling-errors-in-textwire",level:2},{value:"Error Page",id:"error-page",level:2},{value:"Error in Production",id:"error-in-production",level:3},{value:"Error with Debug Mode",id:"error-with-debug-mode",level:3},{value:"Custom Error Page",id:"custom-error-page",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,o.jsx)(n.p,{children:"Textwire aims to provide a simple and user-friendly API for developers. However, errors can still occur in your project. This guide will help you understand how to handle errors in Textwire, enabling you to identify and resolve issues effectively."}),"\n",(0,o.jsx)(n.h2,{id:"when-do-errors-occur",children:"When Do Errors Occur?"}),"\n",(0,o.jsx)(n.p,{children:"Errors in Textwire can arise from a variety of situations. For instance, calling a non-existent function will result in an error. Regardless of whether you're parsing a string or a file, errors will be returned to your Go code. Below are common scenarios that may lead to errors:"}),"\n",(0,o.jsx)(n.h3,{id:"common-error-cases",children:"Common Error Cases"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Incorrect Argument Types"}),": Passing an argument of the wrong type to a function (e.g., passing an integer to a function that expects a string)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Division by Zero"}),": Attempting to divide by zero will result in an error."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Undefined Functions"}),": Using a function that does not exist in Textwire will trigger a detailed error message."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Undefined Variables"}),": Referencing a variable that has not been defined."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unsupported Function Calls"}),": Calling a function on a value type that does not support it."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Undefined ",(0,o.jsx)(n.code,{children:"@insert"})," Statements"]}),": Using an ",(0,o.jsx)(n.code,{children:"@insert"})," with a name that is not defined in the layout file."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Duplicate ",(0,o.jsx)(n.code,{children:"@insert"})," or ",(0,o.jsx)(n.code,{children:"@slot"})," Statements"]}),": Defining the same ",(0,o.jsx)(n.code,{children:"@insert"})," or ",(0,o.jsx)(n.code,{children:"@slot"})," statement multiple times in a layout file with the same name."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Invalid Layout File Paths"}),": Specifying a layout file path that does not exist, such as ",(0,o.jsx)(n.code,{children:"@use('~something')"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Textwire will return detailed error messages in each of these scenarios, helping you quickly identify and resolve issues in your project."}),"\n",(0,o.jsx)(n.h2,{id:"handling-errors-in-textwire",children:"Handling errors in Textwire"}),"\n",(0,o.jsx)(n.p,{children:"Handling errors in Textwire are handled in you Go code. Let's say you are evaluating a string that contains Textwire code with an incorrect function usage:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'inp := "{{ name.split(1) }}"\n\nresult, err := textwire.EvaluateString(inp, map[string]interface{}{\n    "name": "Serhii Cho",\n})\n\nif err != nil {\n    // handle the error\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"/docs/v2/functions/str#split",children:"split"})," function requires a string as an argument, not an integer. If an incorrect argument type is passed, Textwire will return an error from the ",(0,o.jsx)(n.code,{children:"EvaluateString"})," function, which you can handle as needed."]}),"\n",(0,o.jsx)(n.p,{children:"In the same way you handle errors with evaluating a file or working with templating system."}),"\n",(0,o.jsx)(n.h2,{id:"error-page",children:"Error Page"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Single File or String Evaluation"}),": If an error occurs while evaluating a single file or string, the output will be empty."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Templating System"}),": When using Textwire as a ",(0,o.jsx)(n.strong,{children:"templating system"}),", an error page will be rendered instead. This is a static HTML page displayed when an error occurs."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The error page is fully customizable, and you can configure its path in the ",(0,o.jsx)(n.a,{href:"/docs/v2/guides/configurations",children:"configuration"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["When an error occurs, we cannot serve you the output to the frontend. The wrong usage of functions will lead to wrong function output, which can result in wrong data being displayed on the frontend. For better security and data integrity, the best way is to prevent the user of your site to see the output. You can read more about this ",(0,o.jsx)(n.a,{href:"/docs/v2/faq/questions#why-its-best-to-prevent-visitors-of-your-site-from-seeing-the-result-of-the-function-output-when-an-error-occurs",children:"here in the FAQ section"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"error-in-production",children:"Error in Production"}),"\n",(0,o.jsx)(n.p,{children:"When something goes wrong with your Textwire code, you'll get pre-defined HTML with the static message displayed. This is what people would see when your app is in production:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Error output in Textwire",src:r(8665).A+"",width:"2980",height:"926"})}),"\n",(0,o.jsx)(n.h3,{id:"error-with-debug-mode",children:"Error with Debug Mode"}),"\n",(0,o.jsxs)(n.p,{children:["When you enable the ",(0,o.jsx)(n.code,{children:"DebugMode"})," in Textwire, you can see the error message in the browser. This is useful when you are developing your application and want to see the error message in the browser. This is what you would see when the ",(0,o.jsx)(n.code,{children:"DebugMode"})," is set to ",(0,o.jsx)(n.code,{children:"true"}),":"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Error output in Textwire",src:r(6076).A+"",width:"1327",height:"530"})}),"\n",(0,o.jsx)(n.h3,{id:"custom-error-page",children:"Custom Error Page"}),"\n",(0,o.jsxs)(n.p,{children:["If you want to define your own error page, you can do so by creating a new HTML file and setting the ",(0,o.jsx)(n.code,{children:"ErrorPagePath"})," configuration to the path of the HTML file. You can read about configurations in the ",(0,o.jsx)(n.a,{href:"/docs/v2/guides/configurations#available-configurations",children:"Available Configurations"})," section."]}),"\n",(0,o.jsx)(n.p,{children:"This is useful when you want to display a custom error message to your users and use your own design for the error page, including the layout usage. For example, you can create a custom error page like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-textwire",children:"@use('~main')\n\n@insert('title', 'About Us')\n\n@insert('content')\n    <h1>Oops!</h1>\n    <p>Something went wrong.</p>\n    <p><a href=\"/\">Go back to home</a></p>\n@end\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This file should be saved somewhere in your ",(0,o.jsx)(n.code,{children:"templates"})," directory that you have specified in the configuration by ",(0,o.jsx)(n.code,{children:"TemplateDir"})," key. Recommended to save it in the root of ",(0,o.jsx)(n.code,{children:"templates"})," directory with the name ",(0,o.jsx)(n.code,{children:"error-page.tw"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Here is the example of how you can set the ",(0,o.jsx)(n.code,{children:"ErrorPagePath"})," configuration:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'func main() {\n    // ...\n\n    tpl, err = textwire.NewTemplate(&config.Config{\n        TemplateExt:   ".tw",\n        ErrorPagePath: "error-page",\n        DebugMode:     true,\n    })\n\n    // ...\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Since ",(0,o.jsx)(n.code,{children:"TemplateDir"})," is set to ",(0,o.jsx)(n.code,{children:"templates"})," by default, the ",(0,o.jsx)(n.code,{children:"ErrorPagePath"})," will look for the file in the ",(0,o.jsx)(n.code,{children:"templates"})," directory."]}),"\n",(0,o.jsx)(n.admonition,{title:"Custom Page and Debug Mode",type:"info",children:(0,o.jsxs)(n.p,{children:["Custom error pages are rendered only when ",(0,o.jsx)(n.code,{children:"DebugMode"})," is set to ",(0,o.jsx)(n.code,{children:"false"}),". Otherwise, the default error page will be displayed."]})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},6076:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/debug-error-page-d0bebe5ab656cec190c66046b736bb68.png"},8665:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/oops-e946979c69e89b68edc4da56b756ab16.png"},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var i=r(6540);const o={},t=i.createContext(o);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);