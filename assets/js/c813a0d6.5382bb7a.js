"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2875],{805:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"guides/custom-functions","title":"Custom Functions - v3","description":"Learn how to define and use custom functions in Textwire, enabling you to extend the functionality of Textwire by incorporating user-defined operations","source":"@site/versioned_docs/version-v3/guides/custom-functions.md","sourceDirName":"guides","slug":"/guides/custom-functions","permalink":"/docs/v3/guides/custom-functions","draft":false,"unlisted":false,"tags":[],"version":"v3","sidebarPosition":5,"frontMatter":{"title":"Custom Functions - v3","sidebar_label":"Custom Functions","sidebar_position":5,"description":"Learn how to define and use custom functions in Textwire, enabling you to extend the functionality of Textwire by incorporating user-defined operations"},"sidebar":"tutorialSidebar","previous":{"title":"Evaluating Files","permalink":"/docs/v3/guides/eval-file"},"next":{"title":"Error Handling","permalink":"/docs/v3/guides/error-handling"}}');var r=t(4848),s=t(8453);const o={title:"Custom Functions - v3",sidebar_label:"Custom Functions",sidebar_position:5,description:"Learn how to define and use custom functions in Textwire, enabling you to extend the functionality of Textwire by incorporating user-defined operations"},c="Custom Functions",a={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Function Registration API",id:"function-registration-api",level:2},{value:"Defining Custom Functions",id:"defining-custom-functions",level:2},{value:"Example: String Function",id:"example-string-function",level:3},{value:"Other Function Types",id:"other-function-types",level:3},{value:"Using Custom Functions",id:"using-custom-functions",level:2},{value:"Usage Examples",id:"usage-examples",level:3},{value:"Multiple Arguments",id:"multiple-arguments",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Best Practices",id:"best-practices",level:2}];function l(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"custom-functions",children:"Custom Functions"})}),"\n",(0,r.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(e.p,{children:["Custom functions are user-defined functions in your Go code that extend Textwire's capabilities beyond built-in functions. They were introduced in Textwire ",(0,r.jsx)(e.code,{children:"v2.0.0"})," and allow you to create type-specific operations invoked using the dot operator ",(0,r.jsx)(e.code,{children:"."})," followed by the function name."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-textwire",children:'{{ "John Wick"._isCool() }}`\n'})}),"\n",(0,r.jsx)(e.p,{children:"Custom functions can accept variadic arguments and return values of any type, enabling you to perform custom operations on Textwire data types."}),"\n",(0,r.jsx)(e.h2,{id:"function-registration-api",children:"Function Registration API"}),"\n",(0,r.jsx)(e.p,{children:"Textwire provides six registration methods for different data types. All custom functions should be prefixed with underscore to avoid conflicts with built-in functions."}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Function"}),(0,r.jsx)(e.th,{children:"Function Signature"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterStrFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(s string, args ...any) any"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterIntFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(num int, args ...any) any"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterFloatFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(num float64, args ...any) any"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterBoolFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(b bool, args ...any) any"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterArrFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(arr []any, args ...any) any"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"RegisterObjFunc"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"func(obj map[string]any, args ...any) any"})})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:["All registration methods return an ",(0,r.jsx)(e.code,{children:"error"}),"."]}),"\n",(0,r.jsx)(e.h2,{id:"defining-custom-functions",children:"Defining Custom Functions"}),"\n",(0,r.jsx)(e.h3,{id:"example-string-function",children:"Example: String Function"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'err := textwire.RegisterStrFunc("_isCool", func(s string, args ...any) any {\n    return s == "John Wick"\n})\n'})}),"\n",(0,r.jsx)(e.h3,{id:"other-function-types",children:"Other Function Types"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'// Integer\nerr := textwire.RegisterIntFunc("_double", func(num int, args ...any) any {\n    return num * 2\n})\n\n// Float\nerr := textwire.RegisterFloatFunc("_double", func(num float64, args ...any) any {\n    return num * 2\n})\n\n// Boolean\nerr := textwire.RegisterBoolFunc("_negate", func(b bool, args ...any) any {\n    return !b\n})\n\n// Array\nerr := textwire.RegisterArrFunc("_addNumber", func(arr []any, args ...any) any {\n    arr = append(arr, args[0].(int64))\n    return arr\n})\n\n// Object\nerr := textwire.RegisterObjFunc("_addProp", func(obj map[string]any, args ...any) any {\n    key := args[0].(string)\n    value := args[1]\n    obj[key] = value\n    return obj\n})\n'})}),"\n",(0,r.jsx)(e.h2,{id:"using-custom-functions",children:"Using Custom Functions"}),"\n",(0,r.jsx)(e.h3,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'// String\ninput := "{{ \'John Wick\'._isCool() }}"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "1" because true is converted to string\n\n// Integer  \ninput := "{{ 3._double() }}"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "6"\n\n// Float\ninput := "{{ 3.5._double() }}"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "7.0"\n\n// Boolean\ninput := "{{ true._negate() }}"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "0"\n\n// Array\ninput := "{{ [1, 2]._addNumber(3) }}"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "1, 2, 3"\n\n// Object\ninput := `{{ obj = {name: "Anna"}; obj = obj._addProp("age", 25); obj.age }}`\nresult, err := textwire.EvaluateString(input, nil)\n// Result: "25"\n'})}),"\n",(0,r.jsx)(e.h3,{id:"multiple-arguments",children:"Multiple Arguments"}),"\n",(0,r.jsx)(e.p,{children:"Custom functions support variadic arguments:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:"err := textwire.RegisterStrFunc(\"_format\", func(s string, args ...any) any {\n    if len(args) >= 2 {\n        prefix := args[0].(string)\n        suffix := args[1].(string)\n        return prefix + s + suffix\n    }\n    return s\n})\n\ninput := \"{{ 'hello'._format('>>', '<<') }}\"\nresult, err := textwire.EvaluateString(input, nil)\n// Result: \">>hello<<\"\n"})}),"\n",(0,r.jsx)(e.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(e.p,{children:"Registration fails if a custom function name already exists:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'err := textwire.RegisterStrFunc("_duplicate", func(s string, args ...any) any {\n    return s\n})\n\n// Second registration fails\nerr = textwire.RegisterStrFunc("_duplicate", func(s string, args ...any) any {\n    return s + "2"\n})\n// Error: custom function \'_duplicate\' already defined for \'strings\'\n'})}),"\n",(0,r.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Always use underscore prefix"})," to avoid conflicts with built-in functions"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Built-in functions take precedence"})," over custom functions"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Handle edge cases"})," (empty strings, nil arguments)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Validate arguments"})," before processing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use descriptive names"})," for clarity"]}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{title:"Naming Conflicts",type:"warning",children:(0,r.jsx)(e.p,{children:"To avoid conflicts with built-in functions, always prefix your custom functions with an underscore (_). Built-in functions take precedence over custom ones, so defining a custom function with the same name as a built-in function will cause the built-in function to be used."})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>c});var i=t(6540);const r={},s=i.createContext(r);function o(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);