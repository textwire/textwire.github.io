"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6911],{3955:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/eval-file","title":"Evaluating Files - v3","description":"Learn how to evaluate files containing Textwire code in your Go applications using the EvaluateFile function","source":"@site/versioned_docs/version-v3/guides/eval-file.md","sourceDirName":"guides","slug":"/guides/eval-file","permalink":"/docs/v3/guides/eval-file","draft":false,"unlisted":false,"tags":[],"version":"v3","sidebarPosition":4,"frontMatter":{"title":"Evaluating Files - v3","sidebar_label":"Evaluating Files","sidebar_position":4,"description":"Learn how to evaluate files containing Textwire code in your Go applications using the EvaluateFile function"},"sidebar":"tutorialSidebar","previous":{"title":"Evaluating Strings","permalink":"/docs/v3/guides/eval-string"},"next":{"title":"Custom Functions","permalink":"/docs/v3/guides/custom-functions"}}');var l=i(4848),s=i(8453);const r={title:"Evaluating Files - v3",sidebar_label:"Evaluating Files",sidebar_position:4,description:"Learn how to evaluate files containing Textwire code in your Go applications using the EvaluateFile function"},a="Evaluating Files",o={},d=[{value:"Good to Know",id:"good-to-know",level:2},{value:"Return Values",id:"return-values",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"File Path Resolution",id:"file-path-resolution",level:2},{value:"When to Use EvaluateFile",id:"when-to-use-evaluatefile",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"evaluating-files",children:"Evaluating Files"})}),"\n",(0,l.jsxs)(n.p,{children:["Use the ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," function to evaluate a file containing Textwire code. The function accepts a file path and a map of variables to inject into the template. This approach is ideal for processing individual template files without setting up a full template engine."]}),"\n",(0,l.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'path := "templates/email-template.tw"\n\nresult, err := textwire.EvaluateFile(path, map[string]any{\n    "name": "Anna",\n    "age":  25,\n    "role": "Developer",\n})\n\nif err != nil {\n    log.Fatal(err)\n}\n\n// result now contains the fully evaluated template content\n'})}),"\n",(0,l.jsx)(n.h2,{id:"good-to-know",children:"Good to Know"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Confiturations"})," that you set with ",(0,l.jsx)(n.code,{children:"Configure"})," have no effect on ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," and ",(0,l.jsx)(n.code,{children:"EvaluateString"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["You cannot use template directives like ",(0,l.jsx)(n.code,{children:"@use"}),", ",(0,l.jsx)(n.code,{children:"@insert"}),", ",(0,l.jsx)(n.code,{children:"@reserve"})," or ",(0,l.jsx)(n.code,{children:"@component"})," inside because they are specific to templates."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"return-values",children:"Return Values"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," function returns two values:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"string"})," - The evaluated template with all variables substituted and Textwire code processed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"error"})," - Any error that occurred during file reading, compilation, or evaluation"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.p,{children:"The function can return errors for various reasons:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File not found"})," - The specified path does not exist"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Permission denied"})," - Insufficient file system permissions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Syntax errors"})," - Invalid Textwire syntax in the template file"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Undefined variables"})," - Variables referenced but not provided in the data map"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Type mismatches"})," - Incompatible data types when evaluating expressions"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Always check the error value before using the result string:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'result, err := textwire.EvaluateFile("template.tw", data)\nif err != nil {\n    // handle error here\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"file-path-resolution",children:"File Path Resolution"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," function resolves file paths as follows:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Relative paths"})," are resolved from the main entry point directory"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Absolute paths"})," are used as specified"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Template directory configuration"})," does not affect ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," - it uses exact paths"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File extensions"})," are not automatically added - specify the full path including ",(0,l.jsx)(n.code,{children:".tw"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"when-to-use-evaluatefile",children:"When to Use EvaluateFile"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"EvaluateFile"})," when:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Processing individual template files without full template engine setup"}),"\n",(0,l.jsx)(n.li,{children:"Evaluating user-uploaded template files"}),"\n",(0,l.jsx)(n.li,{children:"Creating one-off template evaluations"}),"\n",(0,l.jsx)(n.li,{children:"Testing template files during development"}),"\n",(0,l.jsx)(n.li,{children:"Building simple template-based tools"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["For complex applications with multiple templates, consider using the template engine with ",(0,l.jsx)(n.code,{children:"textwire.NewTemplate"})," for better performance and caching."]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Validate file paths"})," before evaluation to prevent path traversal attacks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Handle errors gracefully"})," and provide meaningful error messages to users"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use descriptive variable names"})," in data maps for better code readability"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Consider file permissions"})," when deploying applications in production"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cache frequently evaluated files"})," for better performance in production applications"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(6540);const l={},s=t.createContext(l);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);